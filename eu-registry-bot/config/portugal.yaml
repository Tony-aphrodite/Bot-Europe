# Portugal Portal Configuration

portal:
  name: "Portugal - gov.pt"
  base_url: "https://www.gov.pt"
  auth_url: "https://www.autenticacao.gov.pt"
  # Balcão do Empreendedor - Ocupação de espaço público
  service_url: "https://www2.gov.pt/inicio/espaco-empresa/balcao-do-empreendedor/ocupacao-de-espaco-publico-instalacao-de-equipamento"
  language: "pt"

authentication:
  # Authentication methods supported
  methods:
    - certificate  # Digital certificate (.p12/.pfx)
    - cartao_cidadao  # Citizen Card (requires card reader)
    - chave_movel  # Mobile Digital Key (manual intervention)

  # Recommended for automation
  preferred_method: "certificate"

  # Certificate settings
  certificate:
    type: "p12"  # or "pfx"
    # Path configured in .env

endpoints:
  login: "/autenticacao"
  services: "/servicos"
  submission: "/submissao"

forms:
  # Public road installation permit
  instalacao_via_publica:
    name: "Solicitud instalación en vía pública"
    category: "Empresas"

    fields:
      - name: "nif"
        type: "text"
        required: true
        description: "Tax Identification Number"

      - name: "nome_requerente"
        type: "text"
        required: true
        description: "Applicant name"

      - name: "morada"
        type: "text"
        required: true
        description: "Address"

      - name: "codigo_postal"
        type: "text"
        required: true
        description: "Postal code"

      - name: "localidade"
        type: "text"
        required: true
        description: "City"

      - name: "email"
        type: "email"
        required: true
        description: "Email address"

      - name: "telefone"
        type: "text"
        required: false
        description: "Phone number"

      - name: "descricao_instalacao"
        type: "textarea"
        required: true
        description: "Installation description"

      - name: "local_instalacao"
        type: "text"
        required: true
        description: "Installation location"

      - name: "data_inicio"
        type: "date"
        required: true
        description: "Start date"

      - name: "data_fim"
        type: "date"
        required: false
        description: "End date"

    # Supported file formats for all attachments
    supported_formats:
      documents: ["pdf", "doc", "docx", "rtf", "odt", "txt"]
      spreadsheets: ["xls", "xlsx", "ods"]
      images: ["jpg", "jpeg", "png"]
      archives: ["zip"]

    max_file_size_mb: 10
    max_total_size_mb: 50

    attachments:
      - name: "documento_identificacao"
        required: true
        formats: ["pdf", "jpg", "jpeg", "png", "doc", "docx"]
        max_size_mb: 5
        description: "Identity document"

      - name: "plano_instalacao"
        required: true
        formats: ["pdf", "doc", "docx", "jpg", "png"]
        max_size_mb: 10
        description: "Installation plan"

      - name: "outros_documentos"
        required: false
        formats: ["pdf", "doc", "docx", "xls", "xlsx", "jpg", "png", "rtf", "odt"]
        max_size_mb: 10
        description: "Other supporting documents"

selectors:
  # CSS/XPath selectors for automation - ePortugal / Balcão do Empreendedor
  # Updated from actual portal analysis

  # Authentication (autenticacao.gov.pt)
  auth_container: "#autenticacao-container"
  login_select_container: ".login-select-button-container"
  citizen_option: "a[href*='cartao-cidadao']"
  cmd_option: "a[href*='chave-movel-digital']"
  certificate_option: ".login-select-button-container li:first-child"

  # Service form (ePortugal Balcão do Empreendedor)
  district_dropdown: "select[id*='selectedDistrit']"
  municipality_dropdown: "select[id*='selectedCounty']"
  parish_dropdown: "select[id*='selectedParish']"
  submit_button_container: "#submitButtonDiv"
  submit_button: ".tsubmit"
  online_service_form: "#doOnline"

  # Modal dialogs
  service_modal: ".cestoservicos-modal"
  close_modal: ".close, .close1"

  # Status messages
  success_message: "#id-feed_submited_msg, .alert-success"
  error_message: "#id-feed_submited_ko, .autgov-error, .alert-danger"
  error_container: ".autgov-error-container"

  # Receipt
  receipt_download: "a[href*='recibo'], .download-receipt"

  # Waits (in seconds)
  page_load_timeout: 30
  element_timeout: 10
